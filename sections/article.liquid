{% comment %}
  Article section - displays single blog article with image left, content right.
  Features: back link, two-column layout, styled content, comments.
{% endcomment %}

<article class="article full-width" aria-label="{{ article.title | escape }}">
  <div class="article__wrapper">

    {%- comment -%} Back to blog link {%- endcomment -%}
    <a href="{{ blog.url }}" class="article__back-link">
      <svg width="20" height="20" viewBox="0 0 20 20" fill="none" aria-hidden="true">
        <path d="M12.5 15L7.5 10L12.5 5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
      <span>{{ 'blog.back_to_blog' | t }}</span>
    </a>

    {%- comment -%} Two column layout {%- endcomment -%}
    <div class="article__layout">

      {%- comment -%} Left: Featured image {%- endcomment -%}
      <div class="article__image-column">
        {%- if article.image -%}
          <div class="article__image-wrapper">
            <img
              src="{{ article.image | image_url: width: 1200 }}"
              srcset="{{ article.image | image_url: width: 400 }} 400w,
                      {{ article.image | image_url: width: 600 }} 600w,
                      {{ article.image | image_url: width: 800 }} 800w,
                      {{ article.image | image_url: width: 1200 }} 1200w"
              sizes="(max-width: 768px) 100vw, 50vw"
              alt="{{ article.image.alt | default: article.title | escape }}"
              class="article__image"
              width="{{ article.image.width }}"
              height="{{ article.image.height }}"
              fetchpriority="high"
            >
          </div>
        {%- endif -%}
      </div>

      {%- comment -%} Right: Content {%- endcomment -%}
      <div class="article__content-column">
        {%- comment -%} Article header {%- endcomment -%}
        <header class="article__header">
          <h1 class="article__title">{{ article.title }}</h1>
          <p class="article__meta">
            <time datetime="{{ article.published_at | date: '%Y-%m-%dT%H:%M:%S%z' }}">
              {{ article.published_at | date: '%B %d, %Y' }}
            </time>
            <span class="article__meta-separator">&middot;</span>
            <span class="article__author">{{ article.author }}</span>
          </p>
        </header>

        {%- comment -%} Article content {%- endcomment -%}
        <div class="article__content">
          {{ article.content }}
        </div>
      </div>

    </div>

    {%- comment -%} Comments section (full width below) {%- endcomment -%}
    {%- if blog.comments_enabled? -%}
      <section class="article__comments" id="comments">
        <h2 class="article__comments-heading">{{ 'blog.article_comments' | t }}</h2>

        {% paginate article.comments by 10 %}
          {%- if article.comments_count > 0 -%}
            <div class="article__comments-list">
              {%- for comment in article.comments -%}
                <div class="article__comment">
                  <p class="article__comment-author">{{ comment.author }}</p>
                  <p class="article__comment-date">{{ comment.created_at | date: '%B %d, %Y' }}</p>
                  <p class="article__comment-content">{{ comment.content }}</p>
                </div>
              {%- endfor -%}
            </div>

            {%- if paginate.pages > 1 -%}
              <nav class="article__pagination" aria-label="{{ 'pagination.navigation' | t }}">
                {{ paginate | default_pagination: anchor: 'comments' }}
              </nav>
            {%- endif -%}
          {%- endif -%}
        {% endpaginate %}

        {% form 'new_comment', article %}
          <div class="article__comment-form">
            <h3 class="article__comment-form-heading">{{ 'blog.comment_form_title' | t }}</h3>

            {{ form.errors | default_errors }}

            <div class="article__form-field">
              <label for="author" class="article__form-label">{{ 'blog.comment_form_name' | t }}</label>
              <input type="text" name="comment[author]" id="author" value="{{ form.author }}" class="article__form-input" required>
            </div>

            <div class="article__form-field">
              <label for="email" class="article__form-label">{{ 'blog.comment_form_email' | t }}</label>
              <input type="email" name="comment[email]" id="email" value="{{ form.email }}" class="article__form-input" required>
            </div>

            <div class="article__form-field">
              <label for="body" class="article__form-label">{{ 'blog.comment_form_body' | t }}</label>
              <textarea name="comment[body]" id="body" class="article__form-textarea" required>{{ form.body }}</textarea>
            </div>

            <button type="submit" class="article__form-submit">{{ 'blog.comment_form_submit' | t }}</button>
          </div>
        {% endform %}
      </section>
    {%- endif -%}

  </div>
</article>

{%- comment -%} Schema markup for article {%- endcomment -%}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": {{ article.title | json }},
  "datePublished": "{{ article.published_at | date: '%Y-%m-%dT%H:%M:%S%z' }}",
  "dateModified": "{{ article.updated_at | date: '%Y-%m-%dT%H:%M:%S%z' }}",
  "author": {
    "@type": "Person",
    "name": {{ article.author | json }}
  }
  {%- if article.image -%},
  "image": {{ article.image | image_url: width: 1200 | prepend: 'https:' | json }}
  {%- endif -%}
}
</script>

{% stylesheet %}
  .article {
    background-color: #FFF7EA;
    padding: 60px 0 80px;
    padding-top: calc(var(--total-header-height, 110px) + 60px);
  }

  .article__wrapper {
    max-width: 1440px;
    margin: 0 auto;
    padding: 0;
  }

  /* Back link */
  .article__back-link {
    display: inline-flex;
    align-items: center;
    gap: 10px;
    font-family: var(--font-sweet-sans);
    font-size: 14px;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: -0.14px;
    color: #3E2027;
    text-decoration: none;
    margin-bottom: 40px;
    transition: opacity 0.2s ease;
  }

  .article__back-link:hover {
    opacity: 0.7;
  }

  .article__back-link:focus-visible {
    outline: 2px solid #3E2027;
    outline-offset: 2px;
  }

  /* Two column layout */
  .article__layout {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 60px;
    align-items: start;
  }

  /* Left column - Image */
  .article__image-column {
    position: sticky;
    top: calc(var(--total-header-height, 110px) + 40px);
  }

  .article__image-wrapper {
    width: 100%;
  }

  .article__image {
    width: 100%;
    height: auto;
    display: block;
  }

  /* Right column - Content */
  .article__content-column {
    max-width: 600px;
  }

  /* Header */
  .article__header {
    margin-bottom: 40px;
  }

  .article__title {
    font-family: var(--font-alyona);
    font-size: 50px;
    font-weight: 400;
    line-height: 1.1;
    color: #3E2027;
    margin: 0 0 20px;
  }

  .article__meta {
    font-family: var(--font-sweet-sans);
    font-size: 13px;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: -0.13px;
    color: #3E2027;
    opacity: 0.7;
    margin: 0;
  }

  .article__meta-separator {
    margin: 0 8px;
  }

  /* Content */
  .article__content p {
    font-family: var(--font-jokker);
    font-size: 18px;
    font-weight: 400;
    line-height: 1.65;
    color: #3E2027;
    margin: 0 0 1.5em;
  }

  .article__content > :first-child {
    margin-top: 0;
  }

  .article__content > :last-child {
    margin-bottom: 0;
  }

  .article__content h2 {
    font-family: var(--font-alyona);
    font-size: 32px;
    font-weight: 400;
    line-height: 1.15;
    color: #3E2027;
    margin: 50px 0 20px;
  }

  .article__content h3 {
    font-family: var(--font-sweet-sans);
    font-size: 20px;
    font-weight: 500;
    line-height: 1.3;
    text-transform: uppercase;
    letter-spacing: -0.2px;
    color: #3E2027;
    margin: 40px 0 16px;
  }

  .article__content h4 {
    font-family: var(--font-jokker);
    font-size: 18px;
    font-weight: 600;
    line-height: 1.4;
    color: #3E2027;
    margin: 35px 0 14px;
  }

  .article__content a {
    color: #3E2027;
    text-decoration: underline;
    text-underline-offset: 3px;
    transition: opacity 0.2s ease;
  }

  .article__content a:hover {
    opacity: 0.7;
  }

  .article__content ul,
  .article__content ol {
    font-family: var(--font-jokker);
    font-size: 18px;
    font-weight: 400;
    line-height: 1.65;
    color: #3E2027;
    margin: 0 0 1.5em;
    padding-left: 1.5em;
  }

  .article__content li {
    margin-bottom: 0.5em;
  }

  .article__content li:last-child {
    margin-bottom: 0;
  }

  .article__content blockquote {
    font-family: var(--font-alyona);
    font-size: 26px;
    font-weight: 400;
    font-style: italic;
    line-height: 1.4;
    color: #3E2027;
    margin: 40px 0;
    padding: 0 0 0 24px;
    border-left: 3px solid rgba(62, 32, 39, 0.3);
  }

  .article__content blockquote p {
    font-family: inherit;
    font-size: inherit;
    font-weight: inherit;
    line-height: inherit;
    margin: 0;
  }

  .article__content img {
    max-width: 100%;
    height: auto;
    margin: 30px 0;
  }

  .article__content hr {
    border: none;
    border-top: 1px solid rgba(62, 32, 39, 0.2);
    margin: 40px 0;
  }

  /* Comments */
  .article__comments {
    max-width: 600px;
    margin: 80px 0 0;
    margin-left: calc(50% + 30px);
    padding-top: 60px;
    border-top: 1px solid rgba(62, 32, 39, 0.2);
  }

  .article__comments-heading {
    font-family: var(--font-alyona);
    font-size: 32px;
    font-weight: 400;
    line-height: 1;
    color: #3E2027;
    margin: 0 0 40px;
  }

  .article__comment {
    padding: 24px 0;
    border-bottom: 1px solid rgba(62, 32, 39, 0.1);
  }

  .article__comment:last-child {
    border-bottom: none;
  }

  .article__comment-author {
    font-family: var(--font-sweet-sans);
    font-size: 14px;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: -0.14px;
    color: #3E2027;
    margin: 0 0 4px;
  }

  .article__comment-date {
    font-family: var(--font-jokker);
    font-size: 13px;
    font-weight: 400;
    color: #3E2027;
    opacity: 0.6;
    margin: 0 0 12px;
  }

  .article__comment-content {
    font-family: var(--font-jokker);
    font-size: 16px;
    font-weight: 400;
    line-height: 1.5;
    color: #3E2027;
    margin: 0;
  }

  .article__pagination {
    margin-top: 30px;
  }

  /* Comment Form */
  .article__comment-form {
    margin-top: 50px;
  }

  .article__comment-form-heading {
    font-family: var(--font-alyona);
    font-size: 28px;
    font-weight: 400;
    color: #3E2027;
    margin: 0 0 30px;
  }

  .article__form-field {
    margin-bottom: 20px;
  }

  .article__form-label {
    display: block;
    font-family: var(--font-sweet-sans);
    font-size: 13px;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: -0.13px;
    color: #3E2027;
    margin-bottom: 8px;
  }

  .article__form-input,
  .article__form-textarea {
    width: 100%;
    padding: 14px 16px;
    font-family: var(--font-jokker);
    font-size: 16px;
    color: #3E2027;
    background-color: transparent;
    border: 1px solid rgba(62, 32, 39, 0.3);
    transition: border-color 0.2s ease;
  }

  .article__form-input:focus,
  .article__form-textarea:focus {
    outline: none;
    border-color: #3E2027;
  }

  .article__form-textarea {
    min-height: 150px;
    resize: vertical;
  }

  .article__form-submit {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 14px 32px;
    font-family: var(--font-sweet-sans);
    font-size: 14px;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: -0.14px;
    color: #FFFFFF;
    background-color: #3E2027;
    border: none;
    cursor: pointer;
    transition: opacity 0.2s ease;
  }

  .article__form-submit:hover {
    opacity: 0.9;
  }

  .article__form-submit:focus-visible {
    outline: 2px solid #3E2027;
    outline-offset: 2px;
  }

  /* Responsive - 1300px */
  @media (max-width: 1300px) {
    .article__wrapper {
      padding: 0 40px;
    }

    .article__layout {
      gap: 40px;
    }

    .article__title {
      font-size: 42px;
    }
  }

  /* Responsive - Tablet */
  @media (max-width: 1024px) {
    .article {
      padding: 50px 0 60px;
      padding-top: calc(var(--total-header-height, 110px) + 50px);
    }

    .article__wrapper {
      padding: 0 24px;
    }

    .article__layout {
      grid-template-columns: 1fr;
      gap: 40px;
    }

    .article__image-column {
      position: static;
    }

    .article__content-column {
      max-width: 100%;
    }

    .article__title {
      font-size: 42px;
    }

    .article__content p,
    .article__content ul,
    .article__content ol {
      font-size: 17px;
    }

    .article__content h2 {
      font-size: 30px;
      margin-top: 45px;
    }

    .article__content h3 {
      font-size: 18px;
      margin-top: 35px;
    }

    .article__content blockquote {
      font-size: 24px;
      margin: 35px 0;
    }

    .article__comments {
      max-width: 100%;
      margin-left: 0;
      margin-top: 60px;
      padding-top: 50px;
    }
  }

  /* Responsive - Mobile */
  @media (max-width: 768px) {
    .article {
      padding: 40px 0 50px;
      padding-top: calc(var(--total-header-height, 110px) + 40px);
    }

    .article__wrapper {
      padding: 0 12px;
    }

    .article__back-link {
      font-size: 13px;
      margin-bottom: 30px;
    }

    .article__layout {
      gap: 30px;
    }

    .article__header {
      margin-bottom: 30px;
    }

    .article__title {
      font-size: 32px;
      margin-bottom: 16px;
    }

    .article__meta {
      font-size: 12px;
    }

    .article__content p,
    .article__content ul,
    .article__content ol {
      font-size: 16px;
      line-height: 1.6;
    }

    .article__content h2 {
      font-size: 26px;
      margin-top: 35px;
      margin-bottom: 14px;
    }

    .article__content h3 {
      font-size: 16px;
      margin-top: 28px;
      margin-bottom: 12px;
    }

    .article__content h4 {
      font-size: 16px;
      margin-top: 25px;
      margin-bottom: 10px;
    }

    .article__content blockquote {
      font-size: 20px;
      margin: 28px 0;
      padding-left: 18px;
    }

    .article__content img {
      margin: 24px 0;
    }

    .article__comments {
      margin-top: 50px;
      padding-top: 40px;
    }

    .article__comments-heading {
      font-size: 26px;
      margin-bottom: 30px;
    }

    .article__comment-form-heading {
      font-size: 22px;
    }
  }
{% endstylesheet %}

{% schema %}
{
  "name": "t:sections.article.name",
  "class": "article-section",
  "settings": []
}
{% endschema %}
